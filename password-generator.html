<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üîê XKCD L√∂senordsgenerator</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîê</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0f1117;
    --surface: #1a1d27;
    --surface-hover: #222633;
    --border: #2a2e3d;
    --text: #e4e6ef;
    --text-muted: #7a7f96;
    --accent: #6ee7b7;
    --accent-dim: rgba(110, 231, 183, 0.1);
    --accent-glow: rgba(110, 231, 183, 0.25);
    --orange: #fbbf24;
    --red: #f87171;
    --radius: 12px;
  }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 3rem 1rem;
    background-image:
      radial-gradient(ellipse 60% 40% at 50% 0%, rgba(110, 231, 183, 0.06) 0%, transparent 70%),
      radial-gradient(ellipse 40% 30% at 80% 80%, rgba(251, 191, 36, 0.04) 0%, transparent 70%);
  }

  h1 {
    font-family: 'JetBrains Mono', monospace;
    font-size: clamp(1.5rem, 4vw, 2.2rem);
    font-weight: 700;
    letter-spacing: -0.02em;
    margin-bottom: 0.3rem;
    background: linear-gradient(135deg, var(--accent), var(--orange));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .subtitle {
    color: var(--text-muted);
    font-size: 0.95rem;
    margin-bottom: 2.5rem;
  }

  .container {
    width: 100%;
    max-width: 640px;
  }

  /* Controls */
  .controls {
    display: flex;
    gap: 0.75rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
  }

  .control-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 0.5rem 0.85rem;
    font-size: 0.85rem;
  }

  .control-group label {
    color: var(--text-muted);
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    white-space: nowrap;
  }

  .control-group select {
    background: var(--bg);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.3rem 0.5rem;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    cursor: pointer;
    outline: none;
  }

  .control-group select:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent-dim);
  }

  .generate-btn {
    background: linear-gradient(135deg, var(--accent), #34d399);
    color: #0f1117;
    border: none;
    border-radius: var(--radius);
    padding: 0.7rem 1.6rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.9rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    letter-spacing: 0.02em;
  }

  .generate-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 24px var(--accent-glow);
  }

  .generate-btn:active {
    transform: translateY(0);
  }

  /* Password cards */
  .passwords {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .pw-row {
    display: flex;
    border-radius: var(--radius);
    overflow: hidden;
    border: 1px solid var(--border);
    transition: border-color 0.2s, box-shadow 0.2s;
    animation: fadeSlideIn 0.35s ease-out both;
  }

  .pw-row:nth-child(1) { animation-delay: 0s; }
  .pw-row:nth-child(2) { animation-delay: 0.06s; }
  .pw-row:nth-child(3) { animation-delay: 0.12s; }
  .pw-row:nth-child(4) { animation-delay: 0.18s; }

  .pw-row:hover {
    border-color: var(--accent);
    box-shadow: 0 0 0 1px var(--accent-dim), 0 4px 20px rgba(0,0,0,0.3);
  }

  @keyframes fadeSlideIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .pw-display {
    flex: 1;
    background: var(--surface);
    padding: 0.85rem 1.1rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: clamp(0.85rem, 2.5vw, 1.05rem);
    font-weight: 600;
    letter-spacing: 0.03em;
    color: var(--text);
    cursor: pointer;
    transition: background 0.15s;
    display: flex;
    align-items: center;

    min-height: 3rem;
    overflow-x: auto;
    white-space: nowrap;
  }

  .pw-display:hover {
    background: var(--surface-hover);
  }

  .pw-display .leet {
    color: var(--orange);
  }

  .pw-display .sep {
    color: var(--text-muted);
    opacity: 0.6;
  }

  .copy-btn {
    background: var(--surface);
    border: none;
    border-left: 1px solid var(--border);
    padding: 0 1rem;
    cursor: pointer;
    color: var(--text-muted);
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 3.2rem;
  }

  .copy-btn:hover {
    background: var(--surface-hover);
    color: var(--accent);
  }

  .copy-btn.copied {
    color: var(--accent);
    background: var(--accent-dim);
  }

  .copy-btn svg {
    width: 18px;
    height: 18px;
  }

  .pw-entropy {
    background: var(--surface);
    border-left: 1px solid var(--border);
    padding: 0 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 4.5rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    color: var(--text-muted);
    white-space: nowrap;
    gap: 0.3rem;
  }

  .pw-entropy .bits {
    color: var(--text);
    font-weight: 600;
  }

  .pw-entropy .dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .pw-entropy .dot.green { background: #6ee7b7; box-shadow: 0 0 6px rgba(110,231,183,0.4); }
  .pw-entropy .dot.yellow { background: #fbbf24; box-shadow: 0 0 6px rgba(251,191,36,0.4); }
  .pw-entropy .dot.orange { background: #fb923c; box-shadow: 0 0 6px rgba(251,146,60,0.4); }


  /* Toast notification */
  .toast {
    position: fixed;
    top: 1rem;
    left: 50%;
    transform: translateX(-50%) translateY(-16px) scale(0.95);
    background: linear-gradient(135deg, #1a2e28, #1a1d27);
    border: 1px solid var(--accent);
    color: var(--accent);
    padding: 0.7rem 1.4rem 0.7rem 1.1rem;
    border-radius: var(--radius);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.82rem;
    font-weight: 600;
    opacity: 0;
    pointer-events: none;
    transition: all 0.35s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 100;
    box-shadow: 0 8px 32px rgba(0,0,0,0.4), 0 0 0 1px var(--accent-dim), 0 0 24px var(--accent-glow);
    display: flex;
    align-items: center;
    gap: 0.6rem;
    backdrop-filter: blur(12px);
    letter-spacing: 0.02em;
    max-width: calc(100vw - 2rem);
  }

  .toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }

  .toast-check {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--accent);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .toast-check svg {
    width: 12px;
    height: 12px;
    stroke: var(--bg);
    stroke-width: 3;
    fill: none;
  }

  .toast-check svg .check-path {
    stroke-dasharray: 20;
    stroke-dashoffset: 20;
  }

  .toast.show .toast-check svg .check-path {
    animation: drawCheck 0.35s 0.15s ease-out forwards;
  }

  @keyframes drawCheck {
    to { stroke-dashoffset: 0; }
  }
</style>
</head>
<body>

<h1>üîê L√∂senordsgenerator</h1>
<p class="subtitle">XKCD-stil ¬∑ Starka och minnesv√§rda l√∂senord</p>

<div class="container">
  <div class="controls">
    <div class="control-group">
      <label>Min l√§ngd</label>
      <input type="number" id="minLen" value="20" min="8" max="100" style="width:3.5rem; background:var(--bg); color:var(--text); border:1px solid var(--border); border-radius:8px; padding:0.3rem 0.5rem; font-family:'DM Sans',sans-serif; font-size:0.85rem; text-align:center;">
    </div>
    <div class="control-group">
      <label>Max l√§ngd</label>
      <input type="number" id="maxLen" value="40" min="8" max="100" style="width:3.5rem; background:var(--bg); color:var(--text); border:1px solid var(--border); border-radius:8px; padding:0.3rem 0.5rem; font-family:'DM Sans',sans-serif; font-size:0.85rem; text-align:center;">
    </div>
    <button class="generate-btn" onclick="generateAll()">‚ü≥ Generera</button>
  </div>

  <div class="passwords" id="passwords"></div>


</div>

<div class="toast" id="toast">
  <span class="toast-check"><svg viewBox="0 0 16 16"><polyline class="check-path" points="3,8 7,12 13,4"/></svg></span>
  <span class="toast-text">Kopierat till urklipp</span>
</div>

<script>
// --- Word lists ---
const EN_WORDS = [
  "abandon","ability","able","abort","above","absence","absorb","abstract","abuse","academy","accept",
  "accepted","access","account","achieve","acid","acquire","across","acted","acting","action","active",
  "actively","actual","added","adding","addition","address","adequate","adjust","adjusted","admire","admit",
  "admitted","adopt","adopted","adult","advance","advanced","advent","adverse","advice","affected","afford",
  "afforded","after","again","against","aged","agenda","agent","agility","aging","agree","agrees","ahead",
  "aimed","alarm","alarming","album","alert","alien","align","alike","alive","alliance","allow","allowing",
  "almost","alone","along","already","also","alter","although","always","amazing","ambition","amount",
  "amused","analytic","anchor","ancient","angel","anger","angle","angular","animated","ankle","annex",
  "announce","annual","annually","another","answer","anxiety","anyone","anything","anyway","anywhere",
  "apart","apparent","appeal","appear","appetite","apple","applied","apply","applying","approach","approved",
  "archive","area","arena","argue","argument","arise","armed","armor","army","arrange","array","arrest",
  "arrival","arrive","arsenal","article","artist","aside","asleep","assault","asset","assign","assist",
  "assisted","assume","assumed","assuming","atheist","athletes","atlas","attach","attack","attacked",
  "attempt","attempts","attend","attract","auction","audible","author","autopsy","avenue","average","avoid",
  "avoided","awake","award","awards","aware","away","awesome","back","backed","backup","badges","badly",
  "balance","balanced","ball","band","bank","banking","barely","bargain","baron","barrier","base","based",
  "basic","basin","basis","basket","batch","bath","bathroom","battery","battle","bear","bearing","beat",
  "beauty","became","because","become","becoming","been","beer","before","began","begin","behalf","behave",
  "behind","being","bell","belong","belonged","belongs","below","belt","bench","beneath","benefit","beside",
  "besides","best","betrayed","better","beyond","bigger","bill","billion","bird","birthday","bishop","bite",
  "bitter","blank","blanket","blast","blaze","bleed","blend","bless","blessed","blind","block","blocked",
  "blocking","blood","blow","blowing","blown","blue","board","boat","body","boldness","bomb","bombing",
  "bond","bonding","bone","bonus","book","booking","boost","born","borough","borrowed","boss","both",
  "boulder","bound","boundary","bracket","brain","branch","brand","brave","breach","bread","breadth","break",
  "breaking","breath","breathe","breed","brick","bride","bridge","brief","briefly","bright","bring",
  "bringing","broad","broke","broken","broker","bronze","brother","brothers","brought","brown","browser",
  "browsing","brush","brushed","buckets","buddy","budget","buffalo","build","builder","building","built",
  "bulletin","bumped","bunch","bundle","burden","bureau","burn","burned","burning","burst","busy","butter",
  "button","buyer","buying","cabin","cabinet","cabinets","cable","calendar","caliber","call","calling",
  "calm","came","camera","camp","campaign","cancel","candle","candy","capable","capital","captain","capture",
  "captured","carbon","card","cardiac","care","career","careful","cargo","carry","case","cash","cast",
  "castle","casualty","catch","catching","caught","cause","caution","cave","cedar","cell","center","central",
  "ceremony","chain","chair","chairman","chalk","chamber","champion","chance","change","channel","chaos",
  "chapter","chapters","charge","charging","charity","charm","chart","chase","chat","cheap","check",
  "checked","cheek","cheer","chemical","chest","chicken","chief","child","children","china","chip","choir",
  "choosing","chosen","chronic","chunk","circle","circuit","circuits","city","civic","civil","civilian",
  "claim","claimed","clan","clash","class","classic","clay","clean","cleaned","clear","clearing","clerk",
  "client","climate","climb","climbing","cling","clinic","clinics","clip","clock","clone","close","closed",
  "closer","closest","closing","cloth","clothing","cloud","club","clue","cluster","coach","coaching","coal",
  "coast","coastal","coat","coating","cocaine","code","coin","cold","collapse","collect","college","colony",
  "column","combat","combined","come","comeback","comfort","coming","command","comment","commerce","commit",
  "common","commonly","communal","company","compare","compared","compiler","complete","complex","composed",
  "compound","concepts","concern","concerns","concrete","conduct","conducts","confirm","conflict","congress",
  "connect","connects","consent","consider","consists","consumed","contacts","contain","contains","context",
  "continue","contrast","control","controls","convened","convert","convey","convince","cook","cool",
  "cooling","cope","copy","copying","coral","core","corner","correct","cost","costly","cotton","council",
  "count","counter","counting","country","county","couple","coupled","coupling","courage","course","court",
  "cousin","cover","coverage","covered","covering","crack","craft","crane","crash","crashed","crazy","cream",
  "creative","creator","creature","credit","credited","credits","creek","crest","crew","crime","criminal",
  "crimson","crisis","critical","crop","cross","crossing","crowd","crown","crush","crystal","cultural",
  "culture","cure","curious","currency","current","curve","custom","customer","customs","cute","cycle",
  "cycling","cylinder","daily","damage","damaged","dame","dampened","dance","dancer","dancing","danger",
  "dare","dark","data","database","date","daughter","dawn","dead","deadline","deadly","deal","dealing",
  "dealings","dear","death","debate","debating","debt","decade","decay","decent","decided","deciding","deck",
  "declare","declared","decline","decrease","deep","deepest","deeply","default","defaults","defeat",
  "defeated","defence","defend","defender","defiant","deficit","defining","definite","degree","degrees",
  "delay","delayed","delicate","deliver","delta","demand","demanded","demands","dense","densely","deny",
  "departed","deploy","deployed","deposit","depth","deputies","derby","derived","describe","desert","design",
  "designed","designer","desire","desired","desk","desktop","despite","destroy","detached","detail",
  "detailed","detect","detector","develops","device","devil","devote","devoted","dialogue","diary",
  "dictated","diet","differ","digit","digital","dinner","dioxide","direct","directed","dirt","disable",
  "disabled","disco","discount","discover","disease","dish","disk","disorder","dispatch","display",
  "disposal","dispute","distance","distant","distinct","district","ditch","divide","divided","divine","dock",
  "doctor","doctors","doctrine","document","dodge","dollar","dollars","dolphin","domain","domestic",
  "dominant","donate","donated","donation","dose","doubled","doubling","doubt","down","downtown","draft",
  "drafted","drain","drama","dramatic","draw","drawing","drawn","dream","dress","dressed","drew","dried",
  "drift","drill","drink","drinking","drive","driven","driver","drone","drop","dropped","dropping","drug",
  "drum","dual","duality","dumb","dump","duration","during","dust","duty","dwelling","dying","dynamic",
  "dynamics","each","eager","eagle","earlier","earliest","early","earn","earned","earning","earth","ease",
  "easily","east","eastern","easy","eating","economic","economy","edge","edition","editor","educate",
  "educated","educator","effect","effects","effort","eight","eighth","either","elbow","elder","elderly",
  "elect","election","elegant","element","elevated","elite","else","email","embedded","embrace","emerge",
  "emerged","emerging","emission","emit","emotion","emotions","emperor","emphasis","empire","employ",
  "employed","employer","empty","enable","enabled","encoding","ending","endless","enduring","enemies",
  "enemy","energy","enforce","engage","engaged","engaging","engine","engineer","engines","english","enhance",
  "enjoy","enjoyed","enjoying","enormous","enough","enquiry","ensemble","ensure","enter","entered",
  "entering","entire","entitled","entrance","envelope","envy","epic","episode","equal","equally","equipped",
  "erection","erosion","error","eruption","escalate","escape","escaping","essay","essence","estate",
  "estimate","ethnic","evaluate","even","evening","event","eventual","ever","every","everyone","evidence",
  "evident","evil","evolve","evolving","exact","exactly","exam","examine","examines","example","except",
  "excess","exchange","excited","exciting","excluded","exercise","exhibit","exhibits","exile","exist",
  "existed","existing","exit","expand","expect","expected","expedite","expense","expenses","expert",
  "experts","explicit","exploit","explore","explored","export","exposure","express","extend","extended",
  "extends","extent","external","extra","extracts","eyebrows","fabric","fabulous","face","facial","facility",
  "fact","factor","factored","fade","fail","failing","failures","faint","fair","fairly","faith","faithful",
  "fall","fallen","falling","false","fame","familiar","families","family","famous","fancy","farm","farmer",
  "farming","fashion","fast","faster","fastest","fatal","fate","father","fathers","fatigue","fault",
  "favorite","favour","fear","feast","feature","federal","feed","feedback","feel","feeling","feet",
  "felicity","fell","felt","fence","festival","fewer","fewest","fiber","fiction","field","fierce","fifteen",
  "fifty","fight","fighter","figure","figuring","file","filename","filing","fill","film","filtered","final",
  "finally","finances","find","finding","fine","finger","finished","fire","firm","firmware","fiscal","fish",
  "fishing","fitness","fixed","flag","flagship","flame","flash","flat","fled","fleet","flesh","flew",
  "flexible","flight","flip","float","floating","flood","floor","flour","flow","flowing","fluid","flush",
  "flying","focus","focused","fold","folder","folk","follow","follows","font","food","foot","football",
  "force","forced","ford","fore","forecast","foreign","forest","forestry","forever","forge","forget","fork",
  "form","formal","former","formerly","formula","formulas","fort","forth","fortress","forum","forward",
  "fossils","foster","fought","found","founded","founder","founders","four","fourth","fraction","fragrant",
  "frame","framing","frank","fraud","free","freedom","freely","freeze","french","frequent","fresh",
  "friendly","from","front","frontier","frost","frozen","fruit","fuel","full","fullback","fulltime","fully",
  "function","fund","funded","funding","funds","further","fury","fusion","futures","gain","gained","gains",
  "galaxy","gallery","gambling","game","gang","garden","gardens","gate","gateway","gather","gathered",
  "gauge","gave","gear","gender","general","generate","generous","genesis","genetic","genius","genomics",
  "gentle","genuine","getting","ghost","gift","gifted","girl","give","given","glad","glare","glass",
  "glasses","gleam","global","globally","globe","gloom","glorious","glory","glove","glow","glue","goal",
  "goes","gold","golden","golf","gone","good","govern","governed","grab","grace","grade","graded","gradient",
  "graduate","grain","gram","grand","grant","granted","grants","grape","graphic","graphics","grasp","grass",
  "grateful","grave","gravity","gray","great","greatest","greatly","green","greet","grew","grid","grief",
  "grin","grind","grip","gripping","gross","ground","group","grouping","grove","grow","growing","grown",
  "growth","guard","guardian","guess","guest","guidance","guide","guided","guild","guilt","guilty","guitar",
  "gulf","guru","habitat","hack","half","halfway","hall","hand","handling","hang","happened","happily",
  "hardware","harm","harmful","harmless","harmony","harvest","hate","have","haven","head","heading",
  "headline","healthy","hear","hearing","heart","heat","heating","heavy","hedge","heel","heights","held",
  "hell","hello","help","helper","helping","hence","herb","here","heritage","hero","herself","hidden","high",
  "highland","highly","highway","hill","himself","hint","hire","hobby","hold","holder","holders","hole",
  "holiday","holistic","holy","home","homework","honest","honestly","honesty","honey","honor","honored",
  "hope","hoping","horn","horrible","horror","horse","host","hosted","hosting","hotel","hour","house",
  "housing","however","huge","human","humanity","humor","hundreds","hung","hungry","hunt","hunter","hunting",
  "hurry","hurt","husband","hydrogen","hygiene","hymn","idea","ideal","identify","ideology","ignorant",
  "ignore","illusion","image","imagine","imagined","imaging","imitate","immense","imminent","immunity",
  "impacts","imperial","implicit","implies","imply","import","imported","imports","impose","imposed",
  "imposing","improve","improved","impulse","inch","incident","include","includes","income","incoming",
  "increase","indeed","index","indexed","indicate","indie","indirect","industry","inequity","infant","infer",
  "infinite","inflated","info","inform","informed","inherent","initiate","injury","inland","inner",
  "innocent","input","insect","inside","insider","insight","inspired","instance","instead","insulin",
  "integer","integral","intend","intended","intense","interest","interim","internal","internet","interns",
  "interval","intimate","into","intro","invaded","invalid","invasion","invest","investor","invoice",
  "involve","involved","inwards","iron","island","isle","isolate","isolated","issue","item","itemized",
  "itself","ivory","jack","jackets","jail","jazz","jean","jersey","jewel","jobs","join","joined","jointly",
  "joke","joker","journal","journals","journey","judge","judgment","juice","jump","junior","jury","just",
  "justice","karma","keen","keep","keeping","kernels","keyboard","keyword","kick","kidney","kill","killing",
  "kind","kindness","kinetic","king","kingdom","kiss","kitchen","knee","knew","knife","knight","knit",
  "knock","knot","know","label","labeling","lack","lacking","ladder","laid","lake","lamp","lance","land",
  "landing","landlord","landmark","lane","language","large","largest","laser","last","lasting","latch",
  "late","lately","later","lateral","laugh","launch","launched","lawfully","lawn","lawyer","lawyers","layer",
  "layering","layout","lead","leader","leading","leaf","league","lean","learn","learned","learning","lease",
  "least","leather","leaving","left","leftover","legacy","legal","legally","lemonade","lend","lending",
  "length","lens","less","lesson","lessons","letter","letters","level","leverage","liberal","licence",
  "licensed","life","lift","lifted","lifting","light","lighter","like","likeness","limb","limit","limited",
  "limiting","line","linear","linen","lineup","link","linking","lion","list","listen","listing","literal",
  "literary","live","lively","liver","llama","load","loaded","loading","loan","local","locally","located",
  "location","lock","lockdown","locked","lodge","logic","logical","logistic","logo","lonesome","long",
  "longer","longest","longtime","look","looking","loose","lord","lose","losing","loss","lost","lottery",
  "loud","love","lovely","lover","lower","lowering","lowest","luck","lucky","lunar","lunch","luxury","lyric",
  "machine","made","magic","magnetic","mail","main","mainly","maintain","major","majority","make","maker",
  "makeup","male","mall","manage","managed","manager","mandate","manga","manifest","mankind","manner",
  "manor","manual","manually","many","maple","mapping","marathon","march","margin","marginal","margins",
  "mark","marker","market","marking","marriage","married","marry","marsh","mason","mass","massive","master",
  "mastered","mastery","match","mate","material","matter","matters","maturity","maximize","maximum","mayo",
  "mayor","meal","mean","meaning","measure","measures","meat","mechanic","media","medical","medicine",
  "medieval","medium","meet","meeting","meetings","mega","member","members","membrane","memorial","memories",
  "memory","mental","mention","mentor","menu","merchant","mercy","mere","merely","merge","merit","mesh",
  "metal","meter","method","methods","middle","midnight","midst","might","mighty","mild","mile","military",
  "milk","million","mind","mine","mineral","minimal","minimize","minimum","mining","ministry","minor",
  "minority","mint","minus","miracle","miracles","mirror","miss","mission","mistaken","mixer","mixture",
  "mobile","mockups","mode","model","moderate","modern","modest","modular","modules","mold","molecule",
  "moment","moments","momentum","money","monitor","monopoly","month","monthly","mood","moon","moral","more",
  "morning","mortgage","most","mostly","mother","motion","motivate","motor","mount","mounted","mounting",
  "mouse","mouth","move","movement","movie","moving","much","multiple","multiply","murder","museum","music",
  "musical","must","mutual","mystery","myth","nail","naive","name","namely","narrow","nascent","nation",
  "national","native","nature","navigate","navy","near","nearby","nearest","nearly","neat","neatly","neck",
  "need","negative","neighbor","neither","nerve","nervous","nest","network","networks","neutral","never",
  "newly","next","nice","nicely","night","nine","nitrogen","noble","nobody","node","noise","none","norm",
  "normal","normally","north","nose","notable","note","notebook","noted","nothing","notice","noticed",
  "notion","noun","novel","nuclear","number","numerous","nurse","nursing","obituary","objects","obstacle",
  "obtain","obvious","occasion","occur","occurred","ocean","odds","offend","offer","offered","offering",
  "office","officer","officers","official","offshore","often","okay","olive","once","ongoing","online",
  "only","onset","onto","open","opener","opening","opera","opinion","opponent","oppose","opposed","opposing",
  "opposite","optimal","optimize","option","optional","options","oral","orange","orbit","order","ordered",
  "ordinary","organ","organic","organism","organize","oriented","origin","original","origins","orphaned",
  "other","outbreak","outer","outline","outlined","outlook","output","outreach","outside","oven","over",
  "overall","overcome","overhead","overlap","oversee","overtime","overturn","owner","oxide","oxygen","pace",
  "pacific","pack","package","packages","page","paid","pain","painful","paint","painted","painting","pair",
  "palace","palm","panel","panic","panorama","paper","parallel","parent","parental","park","parking",
  "partial","partly","partner","partners","party","passage","passed","passive","passport","pasta","paste",
  "patch","path","patience","patient","patriot","patrol","patron","pattern","pause","paying","payment",
  "peace","peaceful","peak","peculiar","pedantic","peel","peer","penalize","pencil","pending","penny",
  "pension","people","percent","perfect","period","periods","permit","permits","personal","persons",
  "petition","pharynx","phase","phone","photo","phrase","physical","piano","pick","picked","picking",
  "picture","piece","pilaster","pile","pillar","pilot","pinch","pine","pink","pioneer","pipe","pipeline",
  "pitched","pixel","pizza","place","placing","plain","plan","plane","planet","planned","planning","plant",
  "plate","platform","play","player","players","playing","plaza","plead","pleasant","please","pleased",
  "pleasure","pledge","plot","plotted","plotting","pluck","plug","plumb","plunge","plus","pocket","podcasts",
  "poem","poet","poetry","point","pointed","poison","polar","pole","police","policy","polish","polished",
  "politics","poll","polluted","polymer","pond","pool","poor","poorly","pope","populace","popular",
  "populate","port","portable","portal","portion","portrait","pose","position","positive","possess",
  "possible","post","poster","posting","postpone","potato","pottery","pound","pour","poverty","powder",
  "power","powered","powerful","practice","praised","pray","prayer","precious","predator","prefer",
  "pregnant","premises","prepared","presence","present","preserve","press","pressure","prettier","pretty",
  "previous","price","pride","primary","prime","prince","princess","print","printed","prior","priority",
  "prison","pristine","privacy","private","prize","probably","probe","problem","problems","proceed",
  "process","produce","produces","profile","profit","profits","profound","program","programs","progress",
  "project","projects","promise","promote","promoted","proof","proper","property","proposal","prose",
  "prospect","prosper","protect","protein","protest","protocol","proud","prove","proved","provide",
  "provides","proxy","psalm","public","publicly","publish","pull","pulling","pulse","pump","punch",
  "punished","pupil","purchase","pure","purpose","pursue","pursuing","pursuit","push","putting","puzzle",
  "qualify","quality","quarter","quarters","queen","quest","quick","quickly","quiet","quietly","quit",
  "quota","quote","race","racing","radar","radical","radio","railroad","rain","raise","rally","ranch",
  "random","randomly","rang","range","ranging","rank","rapid","rapidly","rare","rarely","rate","rating",
  "ratio","reach","reaction","read","readable","reader","readers","reading","ready","real","reality","realm",
  "rear","reason","reasoned","rebel","rebuild","recall","receive","received","recently","recipes","record",
  "recorded","recover","recovery","redirect","reduce","reduced","reducing","referral","reflect","reflects",
  "reform","reformed","reforms","refunded","regard","regards","regime","region","regional","register",
  "regular","regulate","reign","reject","rejected","relate","related","relating","relation","relax",
  "relaxed","release","released","reliable","relief","relieved","religion","rely","remain","remained",
  "remains","remarks","remember","remote","remotely","removal","remove","removing","renamed","rendered",
  "renewal","renewing","rent","rental","repair","repeat","repeated","replace","reply","reporter","reports",
  "request","require","required","rescue","rescued","research","reserve","reserved","residual","resigned",
  "resolve","resort","resource","respect","respond","response","rest","restless","restore","restored",
  "restrict","result","resulted","results","retailer","retain","retained","retire","retired","retiring",
  "retreat","retrieve","return","returned","returns","reunion","reveal","revealed","reveals","revenue",
  "reversal","reverse","review","reviewer","reviews","revised","revision","revolves","reward","rewarded",
  "rewards","ribbon","rice","rich","ride","rider","ridge","riding","rifle","right","rigid","rigorous","ring",
  "rise","rising","risk","rival","river","road","robot","robust","rock","rocket","rocky","rode","role",
  "roll","romantic","roof","room","root","rope","rose","rouge","rough","roughly","round","route","routine",
  "royal","royalty","ruin","rule","ruler","ruling","rumor","runabout","running","runway","rural","rush",
  "rushing","sacred","sadness","safe","safely","said","saint","sake","salad","salary","sale","salon","salt",
  "same","sample","samples","sampling","sanction","sand","sandy","sang","sauce","save","saving","savings",
  "scale","scaling","scanner","scare","scenario","scene","scenery","scent","schedule","scheme","scholar",
  "scholars","schools","scope","score","scout","screen","screw","scripts","scrutiny","seal","search",
  "season","seasonal","seasons","seat","secret","sections","sector","secure","secured","securely","security",
  "seed","seeding","seek","seem","seen","segment","segments","select","selected","self","sell","seller",
  "selling","semester","senators","send","senior","sense","sensible","sensing","sentence","sept","sequence",
  "sergeant","series","serious","serve","server","services","serving","session","sessions","settle",
  "settled","settling","setup","seventh","several","severe","severity","shade","shadow","shadowed","shaft",
  "shake","shame","shape","shaped","share","shark","sharp","sharpton","shed","sheep","sheer","sheet","shelf",
  "shell","shelter","shelving","shield","shift","shifted","shifting","shine","ship","shipping","shirt",
  "shock","shop","shore","short","shortage","shortly","shot","shoulder","shout","show","showdown","shut",
  "shutting","siblings","sick","side","sideways","sight","sign","signal","signaled","signals","silence",
  "silent","silently","silk","silly","silver","similar","simple","simulate","since","sing","singer",
  "singular","sink","sister","site","sitting","situated","sixth","sixty","size","sketch","skill","skilled",
  "skin","skull","slate","slavery","sleep","sleeve","slice","slide","slight","slightly","slip","slipping",
  "slope","slow","small","smaller","smallest","smart","smell","smile","smoke","smoking","smooth","snack",
  "snake","snap","snapshot","snow","soccer","socially","socials","sock","soft","soften","software","soil",
  "solar","sold","soldiers","sole","solely","solid","solution","solve","solving","some","somebody","somehow",
  "somewhat","song","soon","sorry","sort","sorted","sorting","sought","soul","sound","source","south",
  "southern","space","spare","spark","sparked","spatial","speak","speaker","speaking","spear","special",
  "specific","spectrum","speech","speed","spend","spending","spice","spin","spine","spirit","spirits",
  "split","spoke","spoken","spoon","sporting","spot","spotted","spotting","spray","spread","springer",
  "squad","square","squarely","stable","stack","stadium","staff","staffing","stage","stain","stake","stale",
  "stall","stamp","stance","stand","standard","star","stare","start","started","starting","state","station",
  "stations","status","statute","stay","staying","stays","steady","steal","steam","steel","steep","steer",
  "steering","stellar","stem","step","stepped","stern","stick","still","stimulus","stir","stock","stolen",
  "stomach","stomp","stone","stood","stop","stopped","stopping","storage","store","storm","storming","story",
  "stove","straight","strain","strand","strange","strap","strategy","straw","stream","streams","street",
  "strength","stretch","strict","strictly","strike","striking","string","strings","strip","stroke","strong",
  "strongly","struggle","stuck","students","studied","studio","study","stuff","style","stylish","subject",
  "submit","submits","subtle","suburban","suburbs","succeed","such","suddenly","suffer","suffered","sugar",
  "suggest","suggests","suit","suitable","suite","summary","summer","summersy","summit","super","supplied",
  "supply","support","supports","supposed","sure","surely","surf","surface","surge","surgeon","surgeons",
  "surplus","surprise","survey","surveyed","survival","survive","suspect","suspects","swamp","swear",
  "sweater","sweep","sweet","swift","swim","swing","switch","switched","sword","symbol","symbolic","symbols",
  "symptoms","syndrome","syrup","table","tactics","tail","tailored","take","tale","talent","talk","tall",
  "tangible","tank","tape","target","task","taste","taxation","teach","teacher","teaching","team","teammate",
  "teamwork","tear","technics","teeth","tell","template","temple","tempo","tenant","tend","tendency",
  "tender","term","terminal","terrain","terrific","terror","test","text","textbook","than","thank",
  "thankful","theater","them","theme","then","therapy","they","thick","thin","thing","think","thinking",
  "third","thirteen","this","thorn","thorough","those","thoughts","thousand","thread","threat","threats",
  "three","threw","thriller","thrive","throne","through","throw","thrown","thumb","thus","tickets","tide",
  "tidy","tied","tiger","tight","till","timber","time","timeline","timer","tiny","tire","tired","tissue",
  "title","toast","tobacco","today","token","told","toll","tomorrow","tone","tonight","took","tool","topic",
  "topical","tops","tore","torn","tortured","total","totaling","touch","touching","tough","tour","tourist",
  "toward","towards","tower","town","toxic","trace","track","tracked","tracking","trade","trading","traffic",
  "trail","train","trainer","training","trait","transfer","transit","trap","trash","traveled","travels",
  "treasure","treasury","treat","treated","treating","treaty","tree","trend","trial","triangle","tribal",
  "tribe","trick","trigger","triggers","trillion","trim","trio","trip","troop","trophy","trouble","troubled",
  "truck","true","truly","trump","trunk","trust","trusted","truth","tube","tuck","tuition","tumor","tune",
  "tuner","tunnel","turn","turning","twelve","twin","twist","type","typical","ugly","ultra","umbrella",
  "uncle","uncommon","under","underway","unfair","unfairly","unified","uniform","union","unit","unite",
  "united","unity","universe","unless","unlike","unlikely","unlocked","unnamed","unpacked","unsigned",
  "until","update","updated","updating","upgrade","upon","upper","upset","upward","urban","urbanize","urge",
  "usage","used","useful","user","usual","utility","utter","utterly","valid","validate","valley","valuable",
  "value","valve","variable","vast","vault","vendor","verified","verse","versions","versus","vertical",
  "very","veterans","vice","victim","video","view","viewer","vigor","villages","vinyl","violence","violin",
  "viral","virtue","visa","vision","visit","visiting","visual","vital","vivid","vocal","vodka","voice",
  "volatile","volume","vote","voter","wage","waist","wait","wake","walk","walker","wall","want","ward",
  "warm","warn","warranty","wash","waste","watch","water","wave","weak","weakness","wealth","weaponry",
  "wear","weary","weave","wedge","week","weekly","weighted","weird","welcomed","well","went","were","west",
  "whale","what","wheat","wheel","when","whenever","where","which","while","white","whole","wholly","whom",
  "wicked","wide","wideband","widely","widen","width","wife","wild","wildlife","will","wind","window","wine",
  "wing","winner","winter","wire","wireless","wisdom","wise","wish","witch","withdraw","within","woman",
  "wonder","wondered","wood","woodland","word","wore","work","worker","world","worm","worrying","worth",
  "worthy","wound","wrap","wrist","write","writer","wrong","yacht","yard","yeah","year","yell","yield",
  "young","youth","zebra","zero","zone"
];

const SV_WORDS = [
  "abort","absolut","absoluta","adam","adrig","aldri","allm√§nna","allm√§nt","alls","alltf√∂r","alltid",
  "allvarli","anbefal","anda","ange","angel√§ge","angriper","aning","anm√§rkni","anse","ansvar","ans√•g",
  "antagand","arena","arga","arma","artontal","avancera","avbryta","aven","avgift","avl√§gsen","avsev√§rt",
  "avtal","axel","backe","bagge","bakgrund","bakom","ballong","banan","banbryte","barn","basis","beck",
  "bedraga","bedragar","begrava","begravni","behandla","behov","beh√∂rig","beh√∂rigt","beh√∂va","bekv√§mli",
  "belonade","belopp","bel√∂na","bereda","berg","beror","ber√§ttar","beskriva","best√§mma","best√§ndi","bes√∂ka",
  "betala","betalats","betrakta","betygs√§t","bevakade","bevarad","bevis","bevisad","bevisade","beyond",
  "bibeh√•l","bibel","bidra","bidrag","bidraga","bidragna","bilda","bile","bind","bitar","bits","blad",
  "bland","blek","blick","blid","blind","block","blod","blodryck","blodtry","blom","blommiga","blot","blott",
  "bl√•sig","bokstav","bokstave","bolag","bonus","bord","borta","bred","brev","brevl√•d","brevl√•da","brinnand",
  "brist","brott","bruk","bruka","brun","brygger","bryt","bryta","buss","byggnade","b√•tar","cell","chef",
  "citat","cykel","cykeltur","dagar","dagis","dammande","dammig","dans","dansa","dator","dela","delar",
  "delikata","delta","demon","deras","dice","diet","digitalt","dikt","dimma","dimmigt","diskuter","djup",
  "djupa","dock","doft","dold","dolt","dominera","donor","dress","drev","drickbar","driva","driven","drog",
  "dryg","dr√∂ja","dr√∂mland","dr√∂mt","efter","eftersyn","eget","egnas","eken","ekonomin","elde","elden",
  "elegant","elektrif","elit","elitserf","emellert","emotsed","enad","enbart","enda","energisk","engager",
  "enge","enkel","enorm","enormt","ensamsyn","ense","enslig","enst√∂rre","episk","eras","erbjudan","erfarenl",
  "erforde","erikor","etisk","etta","eventuet","evig","exakt","extra","fack","fader","fakta","faktisk",
  "falla","fallit","falsk","famna","fantasti","fara","farlig","farm","fasan","fast","fatt","feber","fega",
  "femma","femton","fest","fiber","figur","fika","fikar","fikon","film","filt","fina","fisk","fj√§rran",
  "flagg","flask","fler","flora","flyg","flyga","flygel","flygplan","fokus","folk","folklig","folkvald",
  "form","forma","fors","frakta","framf√∂ra","framtida","fram√•t","fred","fredliga","frid","frig√∂ra",
  "friklost","frisk","fritt","from","frost","frukt","frun","fr√§mst","full","fullm√•n","fullm√•ne","fult",
  "furu","f√§rdplat","f√§rja","f√•gel","f√∂lja","f√∂rbi","f√∂rening","f√∂rklara","f√∂rklari","f√∂rneka","f√∂rnuft",
  "f√∂rnufti","f√∂rs√∂ker","f√∂r√§dlad","galen","ganska","gata","gemenski","genombry","genomsn","gick","gift",
  "gilla","given","gjort","glad","gladaste","glas","glass","glatt","globalt","gl√§djest","gl√§nsand","gl√§ntan",
  "gnisslat","gnist","gnista","gnistran","gott","grabb","granne","grannla","grannlag","grav","greppbar",
  "grilln√§t","gripa","gripande","grop","grov","grunda","grundla","grundlag","grupp","grymt","gr√§ns","gr√•tt",
  "gr√∂nsaka","gunga","g√§rna","g√§rntjuv","g√•ende","hallbar","halt","halvan","halvt","halvv√§gs","hamn","hamna",
  "hampa","hand","handfull","handla","handlare","hare","hatt","havra","hela","hellre","helt","hemma",
  "hemresa","heta","hink","hinna","hittill","hjort","hjul","hj√§lm","hj√§lpmed","hj√§lpsam","hobby","hopf√§ll",
  "hora","hornet","hovmodig","hugga","hugorm","humor","hund","hundra","hus√§gare","huvud","hylla","h√§lla",
  "h√§lsosam","h√§nsynsl","h√§pnade","h√§rledni","h√§rlig","h√§rvidla","h√•llfast","h√∂ger","h√∂jda","ikapp","index",
  "inf√∂r","inga","ingen","ink√∂pare","inleddes","innersta","innuti","insatser","insiktsg","inspelad","insyn",
  "inte","intensiv","intresse","ironi","ironiskt","isar","iver","ivrig","ivrighet","jaga","jagar","jakt",
  "jakttid","jord","jultomte","jumpa","just","j√§mf√∂ra","j√§mf√∂rda","j√§rn","j√§rn√•t","kaffe","kalkste","kall",
  "kamma","kamp","kampa","kamratli","kanal","kant","kapacite","kapp","karri√§rs","karta","kast","katt","kemi",
  "kille","kilo","kilogram","kind","klaga","klan","klap","klar","klarg√∂ra","klart","klassik","klen","klev",
  "klick","klimata","kliva","klockren","klok","kloss","klot","knapp","knappast","knekt","knipa","kniv",
  "knopp","knyta","kobra","kock","koll","kolv","komma","kommunal","komplet","konflikt","konst","konstn√§r",
  "kontrol","kork","korstr√•d","kort","kost","kraft","kraftfu","kram","krig","kring","krita","krok",
  "kryddiga","kr√§kbar","kr√•nglig","kudde","kung","kunga","kurr","kust","kvar","kvarn","kvitt","kv√§llung",
  "kyla","kyrka","k√§lla","k√§mpa","k√§nsla","k√§restab","k√∂nsdisk","k√∂pare","lack","laddning","laga","lagd",
  "lager","laglig","lampa","landlord","larm","laser","last","latin","leda","ledare","ledig","ledighet",
  "lekplat","lera","lever","levnads","lika","likhet","likna","liksom","limma","lindring","linje","lista",
  "lite","livlig","livr√§dd","livserfa","livsverk","ljud","ljuga","ljummelb","ljung","ljunghe","ljus","lock",
  "logg","login","lokal","lugn","lugna","lunch","lund","lunga","lycka","lyckade","lyckades","lyda","lyft",
  "lyfta","lyskraft","l√§rdomaf","l√∂fte","l√∂nsamhe","l√∂sryck","mager","magic","majblom","major","makt","malt",
  "mamma","mandari","mandarif","mango","mark","markant","markerar","marks","mask","massa","mast","matt",
  "matta","medbesti","media","mekanis","mekanisk","meningen","meny","metro","mets√∂kni","midsomm","mild",
  "miljon√§r","mina","mind","minnesri","minut","miss","mist","mjuk","mjuka","mobba","moderata","modig","moga",
  "mognade","mold","moln","mono","mord","morot","mota","motg√•ng","motor","motst√•nd","motta","mull","mund",
  "munk","muspekad","mygga","mylla","m√§nner","m√§rkbart","m√•lare","m√•ngfald","m√•ngsid","naken","natur",
  "natursyn","netto","ninja","njuta","nordisk","nordiskt","norsk","nosig","notis","numeris","nyb√∂rj","nyfik",
  "nyhet","n√§mna","n√§rmre","n√∂jespar","oavsiktl","ocean","okej","omgivand","optimist","ordf√∂rst","ordin√§r",
  "ordna","oredig","organ","otroligt","outforsk","packa","panda","panel","panna","pant","paradox","park",
  "parkera","partners","pass","passand","pasta","patentli","patriar","peka","penn","permitt","peruk","piano",
  "piga","pigan","pilot","pinn","pizza","plan","planerna","plaska","plat","plats","plattfo","plattfor",
  "plog","plugg","pl√•gas","pojken","polera","polis","politisk","port","prakt","praktfu","praktisk","press",
  "prima","princips","prins","pris","problem","producen","program","prov","prova","publik","pump","pung",
  "punkt","puts","p√§ron","radikal","radio","radiokaj","radius","raket","ramen","ranch","reaktio","rebus",
  "redo","reformen","regel","registr","registre","rejna","renoverf","resan","rest","rikligen","ring","ringa",
  "rist","robot","robotar","rock","roman","romanti","rubba","rumba","rund","ruska","rutt","rymd","ryska",
  "ryss","r√§dd","r√§kna","r√§ntan","r√§tt","r√•dgiva","r√•dgivar","r√∂da","r√∂ka","r√∂ra","saga","salva","samh√§lle",
  "samla","sand","sandpap","sandpapp","sanning","sats","satsnis","sedan","sedd","seger","semester","sida",
  "siffra","sikt","sill","simma","sinne","sist","sjuk","sj√∂ar","skada","skaft","skala","skapels","skapelse",
  "skarp","skatt","skicklig","skift","skiftnyc","skina","skinn","skiss","skog","skogsbad","skola","skott",
  "skrik","skrivsal","skugga","skull","skulptu","skulptur","skylt","skylttav","sk√§mt","slags","slapp",
  "slira","slott","slump","slut","smart","smartar","smartare","smila","smyga","snabbas","snabbast","snabbt",
  "sn√§v","sn√∂ig","socialt","solidit","solidite","solig","spara","sparkade","sparkat","special","speciell",
  "spel","spelar","spell","spets","spika","split","sport","spot","sprid","sprungne","stack","stad","stadium",
  "stadsdel","staff","stall","stam","stark","stav","stava","stega","stekt","stem","stift","stig","stiga",
  "still","stock","stol","stolt","stor","storm","storma","stum","stund","styr","st√§ll","st√•ndpu","st√•ndpun",
  "st√∂ld","st√∂tta","sund","super","suver√§n","svala","svamp","svar","svenska","sv√§rd","syftem√•","symboler",
  "symbolis","syssels√§","s√§ker","s√§kerhet","taga","taktfas","talar","tank","tanke","tankefel","tapp","tavla",
  "tavlan","tegelvag","tegelv√§","tekno","tempo","tidsand","tidsenli","tidsplan","tidvis","till","tillit",
  "tills","timma","titan","tolka","tolkning","tomma","tomt","tona","torkat","tors","total","trakt","trav",
  "trave","trea","trend","trixa","trodd","tron","trots","trumslag","tryck","trycker","tryckeri","tr√∂tthet",
  "tuggar","tuggumm","tunga","tunn","turbo","turbulen","tvek","tveka","tvinga","tv√§l","tystna","t√§nkv√§r",
  "t√§nkv√§rd","t√•lig","uggla","under","underbar","unik","union","urban","utl√•tand","utomland","utsikt",
  "utsyn","uts√∂kt","utvidgad","vacker","vaka","vaken","vakthun","vakthund","vald","valde","valla","vallmo",
  "vandel","variabe","variabel","varig","varm","varma","vass","vattenkr","vecka","vederb√∂r","verka","veta",
  "vide","video","vidunder","vigda","viktig","viktigst","vild","vilja","vill","villor","vilse","vink",
  "vinka","vinkel","vinkelr√§","virus","viss","visstids","vrak","vrida","vuxna","v√§ck","v√§der","v√§derlek",
  "v√§ga","v√§gg","v√§ldig","v√§lja","v√§nj","v√§nlig","v√§rda","v√§rk","v√§rldens","v√§sen","v√§ska","v√§st","yacht",
  "ytlig","ytterst","yttersta","zoner","√§ger","√§mnade","√§mne","√§nde","√§ntlig","√§rva","√•ldern","√∂ken","√∂nskad"
];

// Leet-speak map
const LEET = {
  'a': '4', 'A': '4',
  'e': '3', 'E': '3',
  'i': '1', 'I': '1',
  'o': '0', 'O': '0',
  's': '5', 'S': '5',
  't': '7', 'T': '7',
  'l': '1', 'L': '1',
  'b': '8', 'B': '8',
  'g': '9', 'G': '9',
};

const SEPARATORS = ['-', ' ', '/', '*', '_'];

function pick(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

const ALL_WORDS = [...EN_WORDS, ...SV_WORDS];

function caseTransform(word) {
  const r = Math.random();
  if (r < 0.33) return word.toLowerCase();
  if (r < 0.66) return word.toUpperCase();
  return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
}

function applyLeet(word) {
  const eligible = [];
  for (let i = 0; i < word.length; i++) {
    if (LEET[word[i]]) eligible.push(i);
  }
  if (eligible.length === 0) return { text: word, leetIndex: -1 };
  const idx = pick(eligible);
  const original = word[idx];
  const replaced = LEET[original];
  const text = word.substring(0, idx) + replaced + word.substring(idx + 1);
  return { text, leetIndex: idx };
}

function generatePassword() {
  const minLen = parseInt(document.getElementById('minLen').value) || 20;
  const maxLen = parseInt(document.getElementById('maxLen').value) || 40;

  const sep = pick(SEPARATORS);
  const maxAttempts = 200;

  for (let attempt = 0; attempt < maxAttempts; attempt++) {
    // Pick 3 or 4 words randomly
    const count = Math.random() < 0.5 ? 3 : 4;
    let words = [];
    for (let i = 0; i < count; i++) {
      words.push(caseTransform(pick(ALL_WORDS)));
    }

    // Ensure at least one lowercase and one uppercase letter
    const hasLower = words.some(w => /[a-z]/.test(w));
    const hasUpper = words.some(w => /[A-Z]/.test(w));
    if (!hasLower || !hasUpper) {
      const idx = Math.floor(Math.random() * words.length);
      words[idx] = words[idx].charAt(0).toUpperCase() + words[idx].slice(1).toLowerCase();
    }

    // Apply leet-speak to one random word
    const leetWordIdx = Math.floor(Math.random() * count);
    const leetResult = applyLeet(words[leetWordIdx]);
    words[leetWordIdx] = leetResult.text;

    const plain = words.join(sep);

    // Check length constraints
    if (plain.length < minLen || plain.length > maxLen) continue;

    // Build display HTML
    let htmlParts = [];
    for (let i = 0; i < words.length; i++) {
      if (i === leetWordIdx && leetResult.leetIndex >= 0) {
        const w = words[i];
        const li = leetResult.leetIndex;
        htmlParts.push(
          escHtml(w.substring(0, li)) +
          '<span class="leet">' + escHtml(w[li]) + '</span>' +
          escHtml(w.substring(li + 1))
        );
      } else {
        htmlParts.push(escHtml(words[i]));
      }
      if (i < words.length - 1) {
        const sepDisplay = sep === ' ' ? '‚ê£' : sep;
        htmlParts.push('<span class="sep">' + escHtml(sepDisplay) + '</span>');
      }
    }

    return { plain, html: htmlParts.join('') };
  }

  // Fallback if no password fits the constraints
  return { plain: '‚ö† Kunde inte generera ‚Äî prova bredare intervall', html: '<span style="color:var(--red)">‚ö† Kunde inte generera ‚Äî prova bredare intervall</span>' };
}

function escHtml(s) {
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function calcEntropy(pw) {
  let cs = 0;
  if (/[a-z]/.test(pw)) cs += 26;
  if (/[A-Z]/.test(pw)) cs += 26;
  if (/[0-9]/.test(pw)) cs += 10;
  if (/[^a-zA-Z0-9]/.test(pw)) cs += 10;
  return Math.round(pw.length * Math.log2(cs));
}

function generateAll() {
  const container = document.getElementById('passwords');
  container.innerHTML = '';

  for (let i = 0; i < 4; i++) {
    const pw = generatePassword();
    const entropy = calcEntropy(pw.plain);
    const dotClass = entropy >= 80 ? 'green' : entropy >= 60 ? 'yellow' : 'orange';

    const row = document.createElement('div');
    row.className = 'pw-row';
    row.innerHTML = `
      <div class="pw-display" onclick="copyPw(this, '${pw.plain.replace(/'/g, "\\'")}')" title="Klicka f√∂r att kopiera">${pw.html}</div>
      <div class="pw-entropy"><span class="dot ${dotClass}"></span><span class="bits">${entropy}</span> bit</div>
      <button class="copy-btn" onclick="copyPw(this, '${pw.plain.replace(/'/g, "\\'")}')" title="Kopiera">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
        </svg>
      </button>
    `;
    container.appendChild(row);
  }
}

function showToast(msg) {
  const toast = document.getElementById('toast');
  const textEl = toast.querySelector('.toast-text');
  textEl.textContent = msg || 'Kopierat till urklipp';
  toast.classList.remove('show');
  void toast.offsetWidth;
  toast.classList.add('show');
  clearTimeout(window._toastTimer);
  window._toastTimer = setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => { textEl.textContent = 'Kopierat till urklipp'; }, 350);
  }, 2500);
}

function copyToClipboard(text) {
  // Try modern API first
  if (navigator.clipboard && window.isSecureContext) {
    return navigator.clipboard.writeText(text);
  }
  // Fallback: hidden textarea + execCommand
  return new Promise((resolve, reject) => {
    const ta = document.createElement('textarea');
    ta.value = text;
    ta.style.position = 'fixed';
    ta.style.left = '-9999px';
    ta.style.top = '-9999px';
    ta.style.opacity = '0';
    document.body.appendChild(ta);
    ta.focus();
    ta.select();
    try {
      document.execCommand('copy') ? resolve() : reject();
    } catch (e) {
      reject(e);
    }
    document.body.removeChild(ta);
  });
}

function copyPw(el, text) {
  copyToClipboard(text).then(() => {
    window.getSelection().removeAllRanges();
    if (document.activeElement) document.activeElement.blur();

    const row = el.closest('.pw-row');
    const btn = row.querySelector('.copy-btn');
    btn.classList.add('copied');
    setTimeout(() => btn.classList.remove('copied'), 1200);

    showToast();
  }).catch(() => {
    // Select the text so user can copy from context menu
    const row = el.closest('.pw-row');
    const display = row.querySelector('.pw-display');
    const range = document.createRange();
    range.selectNodeContents(display);
    const sel = window.getSelection();
    sel.removeAllRanges();
    sel.addRange(range);

    // Show manual copy toast
    showToast('Tryck "Kopiera" i menyn som visas');
  });
}

// Generate on load
generateAll();
</script>
</body>
</html>
